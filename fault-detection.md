# Evaluation on the Effectiveness of Fault Detection tools with BugSwarm

In this section, we evaluate SpotBugs with BugSwarm to see its capability of capturing Null-Pointer Exception (NPE) bugs. Throughout the section, we will use `tananaev-traccar-64783123` as an example of NPE bug. Also, you can easily get more NPE bugs by running the following query with BugSwarm API.

```python
api.filter_artifacts(json.dumps({
  'status': 'active',
  'classification.exceptions': 'NullPointerException'}
))
```

## Step 1: Run the Docker Container for the Bug Artifact

Show the details of the bug we are going to use
```sh
bugswarm show --image-tag tananaev-traccar-64783123
```

Run the Docker container for the artifact, you might need to type your password

```sh
bugswarm run --image-tag tananaev-traccar-64783123 â€“-use-sandbox
```

Change directory to the buggy version of code, and list to see the files we have

```sh
cd ~/build/failed/tananaev/traccar/
ls -l
```

## Step 2: Add SpotBugs in the Project

Use VIM to edit `pom.xml` file

```sh
vim pom.xml
```

Jump to the end of the build section by typing `?/build` and then **Enter**. Insert the following snippet right before the nearest closing `</plugins>` tag

```sh
<plugin>
    <groupId>com.github.spotbugs</groupId>
    <artifactId>spotbugs-maven-plugin</artifactId>
    <version>3.1.6</version>
    <configuration>
        <effort>Max</effort>
        <threshold>low</threshold>
    </configuration>
</plugin>

```


Hit **Esc**. Then jump to the end of the build section by typing `?/build` and then **Enter**. Insert the following snippet right after the closing `</build>` tag 

```sh
<reporting>
    <plugins>
        <plugin>
            <groupId>com.github.spotbugs</groupId>
            <artifactId>spotbugs-maven-plugin</artifactId>
            <version>3.1.6</version>
            <configuration>
                <effort>Max</effort>
                <threshold>low</threshold>
            </configuration>
        </plugin>
    </plugins>
</reporting>
```

Hit **Esc**. Then save and close the file by typing `:wq` and then **Enter**.

## Step 3: Run Fault Detection with SpotBugs

Run the following command to run SpotBugs over the project
    
```sh
JAVA_HOME="/usr/lib/jvm/java-8-oracle/" && /usr/local/maven-3.2.5/bin/mvn compile com.github.spotbugs:spotbugs-maven-plugin:3.1.6:spotbugs -Dhttps.protocols=TLSv1.2
```

Copy the bug report generated by SpotBugs to sandbox and exit docker container

```sh
cd target
cp spotbugsXml.xml /bugswarm-sandbox
exit
```

Then use a XML viewer to see the results.